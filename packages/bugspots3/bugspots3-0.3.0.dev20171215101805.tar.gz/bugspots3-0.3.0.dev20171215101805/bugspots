#!/usr/bin/env python3
# -*- encoding: utf-8 -*-

from bugspots3 import __version__
from bugspots3 import Bugspots


if __name__ == "__main__":
    import argparse

    parser = argparse.ArgumentParser(
        formatter_class=argparse.ArgumentDefaultsHelpFormatter,
        description=__doc__)

    parser.add_argument("-d", "--depth", type=int,
                        help="depth of the log crawl", default=500)
    parser.add_argument("--grep", help="non-case-sensitive regular expression "
                        "used to match commits",
                        default="(fix(e[sd])?|close[sd]?) #[1-9][0-9]*")

    parser.add_argument("-V", "--version", action="version",
                        version="bugspots %s" % __version__)

    args = parser.parse_args()

    b = Bugspots(depth=args.depth, grep=args.grep)

    hotspots = b.get_hotspots()
