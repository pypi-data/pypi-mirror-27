#!/usr/bin/env python
# -*- coding: utf-8 -*-
# vim: ai ts=4 sts=4 et sw=4 nu

from __future__ import (unicode_literals, absolute_import,
                        division, print_function)
import os
import sys

from termcolor import colored

from rapidpro_controller import (get_logger, OTHER_SERVER, LDANGER, get_color)
from rapidpro_controller.states import remote_role, remote_status

logger = get_logger(os.path.basename(__file__))


def main():
    try:
        role, role_level = remote_role()
    except:
        role, role_level = "UNKNOWN", LDANGER

    try:
        status, status_level = remote_status()
    except:
        status, status_level = "UNKNOWN", LDANGER

    logger.info("{server}:: {role}: {status}".format(
        server=OTHER_SERVER,
        role=colored(role, get_color(role_level)),
        status=colored(status, get_color(status_level))))

    return 0


if __name__ == '__main__':
    sys.exit(main())
