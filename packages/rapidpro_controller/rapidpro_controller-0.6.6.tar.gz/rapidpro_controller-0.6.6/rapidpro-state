#!/usr/bin/env python
# -*- coding: utf-8 -*-
# vim: ai ts=4 sts=4 et sw=4 nu

from __future__ import (unicode_literals, absolute_import,
                        division, print_function)
import os
from termcolor import colored

from rapidpro_controller import (get_logger, THIS_SERVER, LDANGER, get_color)
from rapidpro_controller.states import local_role, local_status

logger = get_logger(os.path.basename(__file__))

try:
    role, role_level = local_role()
except:
    role, role_level = "UNKNOWN", LDANGER

try:
    status, status_level = local_status()
except:
    status, status_level = "UNKNOWN", LDANGER

logger.info("{server}:: {role}: {status}".format(
    server=THIS_SERVER,
    role=colored(role, get_color(role_level)),
    status=colored(status, get_color(status_level))))
