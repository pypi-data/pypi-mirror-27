#!/usr/bin/env python
# -*- coding: utf-8 -*-
# vim: ai ts=4 sts=4 et sw=4 nu

from __future__ import (unicode_literals, absolute_import,
                        division, print_function)
import sys
import os

from rapidpro_controller import get_logger, log_success, log_failure
from rapidpro_controller.services import enable_all_services

logger = get_logger(os.path.basename(__file__))


def enable_all():
    logger.info("enabling all rapidpro components (on startup)")

    success, failed_to_enable = enable_all_services()
    if success:
        log_success(logger, msg="All components now enabled.")
    else:
        log_failure(logger, msg="Could not enable all components: {}"
                    .format(",".join(failed_to_enable)))
        return 1
    return 0


if __name__ == '__main__':
    sys.exit(enable_all())
