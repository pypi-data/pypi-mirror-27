---
# include makkus.dotfiles role
- name: "[finding all requirments files]"
  set_fact:
    all_requirements_files: "{{ freckle_vars_raw.files | file_list_filter('.*requirements.*txt$') | relative_path_filter(freckle_path) }}"

- name: "starting python-dev setup for {{ freckle_path }}"
  include_role:
    name: "makkus.python-dev"
    tasks_from: python-dev-item.yml
  vars:
    pkg_mgr: "{{ freckles_user_vars.get('pkg_mgr', 'auto') }}"
    python_dev_setup_command: "{{ freckle_vars.get('setup_command', 'install') }}"
    python_dev_setuptools_command: "{{ freckle_vars.get('setuptools_command', 'install') }}"
    python_dev_requirements_files: "{{ freckle_vars.get('requirements_files', all_requirements_files) }}"
    python_dev_project_path: "{{ freckle_path }}"
    python_dev_dependency_packages: "{{ freckle_vars_raw.get('vars', []) | create_package_list_from_var_filter('packages') }}"
    python_version: "{{ freckles_user_vars.get('python_version', None) | first_valid_default_list_filter(freckle_vars.get('python_version', None), '3') }}"
