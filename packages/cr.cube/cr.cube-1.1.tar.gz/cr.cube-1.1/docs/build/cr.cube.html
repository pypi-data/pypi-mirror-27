

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>cr.cube package &#8212; Crunch Cube 1.0 documentation</title>
    <link rel="stylesheet" href="_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Welcome to Crunch Cube’s documentation!" href="index.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to Crunch Cube’s documentation!"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Crunch Cube 1.0 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/crunch_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">cr.cube package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-cr.cube.dimension">cr.cube.dimension module</a></li>
<li><a class="reference internal" href="#module-cr.cube.crunch_cube">cr.cube.crunch_cube module</a></li>
<li><a class="reference internal" href="#module-cr.cube">Module contents</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to Crunch Cube’s documentation!</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/cr.cube.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="cr-cube-package">
<h1>cr.cube package<a class="headerlink" href="#cr-cube-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-cr.cube.dimension">
<span id="cr-cube-dimension-module"></span><h2>cr.cube.dimension module<a class="headerlink" href="#module-cr.cube.dimension" title="Permalink to this headline">¶</a></h2>
<p>Contains implementation of the Dimension class, for Crunch Cubes.</p>
<dl class="class">
<dt id="cr.cube.dimension.Dimension">
<em class="property">class </em><code class="descclassname">cr.cube.dimension.</code><code class="descname">Dimension</code><span class="sig-paren">(</span><em>dim</em>, <em>selections=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cr/cube/dimension.html#Dimension"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cr.cube.dimension.Dimension" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Implementation of the Dimension class for Crunch Cubes.</p>
<p>This class contains all the utility functions for working with
Crunch Cube dimensions. It also hides some of the internal implementation
detail from the user, especially for Multiple response variables.</p>
<dl class="attribute">
<dt id="cr.cube.dimension.Dimension.elements">
<code class="descname">elements</code><a class="headerlink" href="#cr.cube.dimension.Dimension.elements" title="Permalink to this definition">¶</a></dt>
<dd><p>Get elements of the crunch Dimension.</p>
<p>For categorical variables, the elements are represented by categories
internally. For other variable types, actual ‘elements’ of the
Crunch Cube JSON response are returned.</p>
</dd></dl>

<dl class="method">
<dt id="cr.cube.dimension.Dimension.labels">
<code class="descname">labels</code><span class="sig-paren">(</span><em>include_missing=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cr/cube/dimension.html#Dimension.labels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cr.cube.dimension.Dimension.labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Get labels of the Crunch Dimension.</p>
</dd></dl>

<dl class="attribute">
<dt id="cr.cube.dimension.Dimension.type">
<code class="descname">type</code><a class="headerlink" href="#cr.cube.dimension.Dimension.type" title="Permalink to this definition">¶</a></dt>
<dd><p>Get type of the Crunch Dimension.</p>
</dd></dl>

<dl class="method">
<dt id="cr.cube.dimension.Dimension.valid_indices">
<code class="descname">valid_indices</code><span class="sig-paren">(</span><em>include_missing</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cr/cube/dimension.html#Dimension.valid_indices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cr.cube.dimension.Dimension.valid_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets valid indices of Crunch Cube Dimension’s elements.</p>
<p>This function needs to be used by CrunchCube class, in order to
correctly calculate the indices of the result that needs to be
returned to the user. In most cases, the non-valid indices are
those of the missing values.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-cr.cube.crunch_cube">
<span id="cr-cube-crunch-cube-module"></span><h2>cr.cube.crunch_cube module<a class="headerlink" href="#module-cr.cube.crunch_cube" title="Permalink to this headline">¶</a></h2>
<p>Home of the CrunchCube class.</p>
<p>This module contains the definition of the CrunchCube class. It represents
the open-source library used for manipulating the crunch cubes (JSON responses
from the Crunch.io platform).</p>
<dl class="class">
<dt id="cr.cube.crunch_cube.CrunchCube">
<em class="property">class </em><code class="descclassname">cr.cube.crunch_cube.</code><code class="descname">CrunchCube</code><span class="sig-paren">(</span><em>response</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cr/cube/crunch_cube.html#CrunchCube"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cr.cube.crunch_cube.CrunchCube" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Implementation of the CrunchCube API class.</p>
<p>Class is used for the implementation of the main API functions that are
needed for seamless integration with the crunch cube responses
(from Crunch.io platform).</p>
<dl class="docutils">
<dt>Main API functions are:</dt>
<dd><ul class="first last simple">
<li>as_array</li>
<li>margin</li>
<li>proportions</li>
<li>percentages</li>
</ul>
</dd>
</dl>
<p>These functions are used to retrieve statistical information of interest,
from the JSON like crunch cubes. Complete usage of each API function is
described within the appropriate docstring.</p>
<p>Crunch Cubes contain richer metadata than standart Python objects, and
they also conceal certain complexity in the data structures from the user.
In particular, Multiple Response variables are generally represented as
single dimensions in result tables, but in the actual data, they may
comprise of two dimensions. These methods (API) understand the subtleties
in the Crunch data types, and correctly compute margins and
percentages off of them.</p>
<dl class="method">
<dt id="cr.cube.crunch_cube.CrunchCube.as_array">
<code class="descname">as_array</code><span class="sig-paren">(</span><em>include_missing=False</em>, <em>weighted=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cr/cube/crunch_cube.html#CrunchCube.as_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cr.cube.crunch_cube.CrunchCube.as_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Get crunch cube as ndarray.</p>
<p>Returns the tabular representation of the crunch cube. The returning
value has as many dimensions, as there are dimensions in the crunch
cube itself. E.g. for a cross-tab representation of a categorical and
numerical variable, the resulting cube will have two dimensions.</p>
<dl class="docutils">
<dt>Args</dt>
<dd>include_missing (bool): Include rows/cols for missing values</dd>
<dt>Returns</dt>
<dd>(ndarray): Tabular representation of the crunch cube</dd>
<dt>Example 1 (Categorical x Categorical):</dt>
<dd><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cube</span> <span class="o">=</span> <span class="n">CrunchCube</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cube</span><span class="o">.</span><span class="n">as_array</span><span class="p">()</span>
<span class="go">np.array([</span>
<span class="go">    [5, 2],</span>
<span class="go">    [5, 3],</span>
<span class="go">])</span>
</pre></div>
</div>
</dd>
<dt>Example 2 (Categorical x Categorical, include missing values):</dt>
<dd><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cube</span> <span class="o">=</span> <span class="n">CrunchCube</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cube</span><span class="o">.</span><span class="n">as_array</span><span class="p">(</span><span class="n">include_missing</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">np.array([</span>
<span class="go">    [5, 3, 2, 0],</span>
<span class="go">    [5, 2, 3, 0],</span>
<span class="go">    [0, 0, 0, 0],</span>
<span class="go">])</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="cr.cube.crunch_cube.CrunchCube.dimensions">
<code class="descname">dimensions</code><a class="headerlink" href="#cr.cube.crunch_cube.CrunchCube.dimensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Dimensions of the crunch cube.</p>
</dd></dl>

<dl class="method">
<dt id="cr.cube.crunch_cube.CrunchCube.labels">
<code class="descname">labels</code><span class="sig-paren">(</span><em>include_missing=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cr/cube/crunch_cube.html#CrunchCube.labels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cr.cube.crunch_cube.CrunchCube.labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets labels for each cube’s dimension.</p>
<dl class="docutils">
<dt>Args</dt>
<dd>include_missing (bool): Include labels for missing values</dd>
<dt>Returns</dt>
<dd>labels (list of lists): Labels for each dimension</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cr.cube.crunch_cube.CrunchCube.margin">
<code class="descname">margin</code><span class="sig-paren">(</span><em>axis=None</em>, <em>weighted=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cr/cube/crunch_cube.html#CrunchCube.margin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cr.cube.crunch_cube.CrunchCube.margin" title="Permalink to this definition">¶</a></dt>
<dd><p>Get margin for the selected axis.</p>
<p>the selected axis. For MR variables, this is the sum of the selected
and non-selected slices.</p>
<dl class="docutils">
<dt>Args</dt>
<dd><dl class="first last docutils">
<dt>axis (int): Axis across the margin is calculated. If no axis is</dt>
<dd>provided the margin is calculated across all axis.
For Categoricals, Num, Datetime, and Text, this
translates to sumation of all elements.</dd>
</dl>
</dd>
<dt>Returns</dt>
<dd>Calculated margin for the selected axis</dd>
<dt>Example 1:</dt>
<dd><div class="first highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cube</span> <span class="o">=</span> <span class="n">CrunchCube</span><span class="p">(</span><span class="n">fixt_cat_x_cat</span><span class="p">)</span>
<span class="go">np.array([</span>
<span class="go">   [5, 2],</span>
<span class="go">   [5, 3],</span>
<span class="go">])</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cube</span><span class="o">.</span><span class="n">margin</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">np.array([10, 5])</span>
</pre></div>
</div>
</dd>
<dt>Example 2:</dt>
<dd><div class="first highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cube</span> <span class="o">=</span> <span class="n">CrunchCube</span><span class="p">(</span><span class="n">fixt_cat_x_num_x_datetime</span><span class="p">)</span>
<span class="go">np.array([</span>
<span class="go">    [[1, 1],</span>
<span class="go">     [0, 0],</span>
<span class="go">     [0, 0],</span>
<span class="go">     [0, 0]],</span>
<span class="go">    [[2, 1],</span>
<span class="go">     [1, 1],</span>
<span class="go">     [0, 0],</span>
<span class="go">     [0, 0]],</span>
<span class="go">    [[0, 0],</span>
<span class="go">     [2, 3],</span>
<span class="go">     [0, 0],</span>
<span class="go">     [0, 0]],</span>
<span class="go">    [[0, 0],</span>
<span class="go">     [0, 0],</span>
<span class="go">     [3, 2],</span>
<span class="go">     [0, 0]],</span>
<span class="go">    [[0, 0],</span>
<span class="go">     [0, 0],</span>
<span class="go">     [1, 1],</span>
<span class="go">     [0, 1]]</span>
<span class="go">])</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cube</span><span class="o">.</span><span class="n">margin</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">np.array([</span>
<span class="go">    [3, 2],</span>
<span class="go">    [3, 4],</span>
<span class="go">    [4, 3],</span>
<span class="go">    [0, 1],</span>
<span class="go">])</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cr.cube.crunch_cube.CrunchCube.percentages">
<code class="descname">percentages</code><span class="sig-paren">(</span><em>axis=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cr/cube/crunch_cube.html#CrunchCube.percentages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cr.cube.crunch_cube.CrunchCube.percentages" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the percentages for crunch cube values.</p>
<p>This function calculates the percentages for crunch cube values. The
percentages are based on the values of the ‘proportions’.</p>
<dl class="docutils">
<dt>Args</dt>
<dd><dl class="first last docutils">
<dt>axis (int): Base axis of percentages calculation. If no axis is</dt>
<dd>provided, calculations are done accros entire table.</dd>
</dl>
</dd>
<dt>Returns</dt>
<dd>(nparray): Calculated array of crunch cube percentages.</dd>
<dt>Example 1:</dt>
<dd><div class="first highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cube</span> <span class="o">=</span> <span class="n">CrunchCube</span><span class="p">(</span><span class="n">fixt_cat_x_cat</span><span class="p">)</span>
<span class="go">np.array([</span>
<span class="go">   [5, 2],</span>
<span class="go">   [5, 3],</span>
<span class="go">])</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cube</span><span class="o">.</span><span class="n">percentages</span><span class="p">()</span>
<span class="go">np.array([</span>
<span class="go">    [33.33333, 13.33333],</span>
<span class="go">    [33.33333, 20.00000],</span>
<span class="go">])</span>
</pre></div>
</div>
</dd>
<dt>Example 2:</dt>
<dd><div class="first highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cube</span> <span class="o">=</span> <span class="n">CrunchCube</span><span class="p">(</span><span class="n">fixt_cat_x_cat</span><span class="p">)</span>
<span class="go">np.array([</span>
<span class="go">   [5, 2],</span>
<span class="go">   [5, 3],</span>
<span class="go">])</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cube</span><span class="o">.</span><span class="n">percentages</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">np.array([</span>
<span class="go">    [50., 40.],</span>
<span class="go">    [50., 60.],</span>
<span class="go">])</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cr.cube.crunch_cube.CrunchCube.proportions">
<code class="descname">proportions</code><span class="sig-paren">(</span><em>axis=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cr/cube/crunch_cube.html#CrunchCube.proportions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cr.cube.crunch_cube.CrunchCube.proportions" title="Permalink to this definition">¶</a></dt>
<dd><p>Get proportions of a crunch cube.</p>
<p>This function calculates the proportions across the selected axis
of a crunch cube. For most variable types, it means the value divided
by the margin value. For Multiple Response types, the value is divied
by the sum of selected and non-selected slices.</p>
<dl class="docutils">
<dt>Args</dt>
<dd><dl class="first last docutils">
<dt>axis (int): Base axis of proportions calculation. If no axis is</dt>
<dd>provided, calculations are done accros entire table.</dd>
</dl>
</dd>
<dt>Returns</dt>
<dd>(nparray): Calculated array of crunch cube proportions.</dd>
<dt>Example 1:</dt>
<dd><div class="first highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cube</span> <span class="o">=</span> <span class="n">CrunchCube</span><span class="p">(</span><span class="n">fixt_cat_x_cat</span><span class="p">)</span>
<span class="go">np.array([</span>
<span class="go">   [5, 2],</span>
<span class="go">   [5, 3],</span>
<span class="go">])</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cube</span><span class="o">.</span><span class="n">proportions</span><span class="p">()</span>
<span class="go">np.array([</span>
<span class="go">    [0.3333333, 0.1333333],</span>
<span class="go">    [0.3333333, 0.2000000],</span>
<span class="go">])</span>
</pre></div>
</div>
</dd>
<dt>Example 2:</dt>
<dd><div class="first highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cube</span> <span class="o">=</span> <span class="n">CrunchCube</span><span class="p">(</span><span class="n">fixt_cat_x_cat</span><span class="p">)</span>
<span class="go">np.array([</span>
<span class="go">   [5, 2],</span>
<span class="go">   [5, 3],</span>
<span class="go">])</span>
</pre></div>
</div>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cube</span><span class="o">.</span><span class="n">proportions</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">np.array([</span>
<span class="go">    [0.5, 0.4],</span>
<span class="go">    [0.5, 0.6],</span>
<span class="go">])</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-cr.cube">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-cr.cube" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to Crunch Cube’s documentation!"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Crunch Cube 1.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Crunch.io.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
  </body>
</html>